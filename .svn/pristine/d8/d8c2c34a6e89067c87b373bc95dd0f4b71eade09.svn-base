<?php $__env->startSection('titulo', trans('leng.Mis servicios')); ?>

<?php $__env->startSection('contenido'); ?>

<?php
$cadenaServicios="";
$reg=1;
foreach ($servicios as $servicio){
    
    $vprecio=($servicio->cost=="")?"":$servicio->cost;
    
    $caja="<input style='width:120px;' onkeypress='return soloNumerosConDecimal(event);' name='costoServicio' id='$servicio->id' value='$vprecio' maxlength='7' class='form-control' />";
    $cadenaServicios.="<tr>
                 <td>$reg</td>
                 <td>$servicio->name</td>
                 <td>$servicio->description</td>
                 <td><b>Sugerido: </b> $ ".T1\Funciones::formato_numeros($servicio->price, ",", ".").
                    "<br><b> Mín: </b> $ ".T1\Funciones::formato_numeros($servicio->minprice, ",", ".").
                    "&nbsp;&nbsp;<b> Máx: </b> $ ".T1\Funciones::formato_numeros($servicio->maxprice, ",", ".").
                    "</td>
                 <td>$caja</td>
                 <td><a href='javascript:;' class='elimina' title='".trans("leng.Eliminar servicio")."' onclick='eliminarRegistro(this)'><img src='/img/cancelado.png' width='25px;'></i></a></td>
                 </tr>";
    $reg++;
}


 if($dataPerson->generalprice==true){
     $vtipo=1;
 }else {
     $vtipo=0;
 }
?>
<input type="hidden" value="<?php echo $vtipo; ?>" id="tipoOculto">
<input type="hidden" name="_token" value="<?php echo e(csrf_token()); ?>" id="token">

    <div class="row" style="font-size: 0.9em">
            <h2 class="heading content-header-title"><?php echo e(trans('leng.Mis servicios')); ?></h2>
            <div class="row">
            <div class="col-sm-12">
                <div class="col-sm-4">
                    <label for="text-input"><?php echo e(trans('leng.Tipo de precio')); ?></label>
                    <select class="form-control" id="tipoCosto" onchange="tipoPrecio(this.value)">
                           <option value="0" <?php echo ($dataPerson->priceservice==true)?"selected":""; ?> ><?php echo e(trans("leng.Precio por servicio")); ?></option>
                           <option value="1" <?php echo ($dataPerson->generalprice==true)?"selected":""; ?>><?php echo e(trans("leng.Precio general")); ?></option>
                       </select>
                </div>
                <div class="col-sm-2">
                    <div id="divPrecioGeneral">
                        <label for="text-input"><?php echo e(trans('leng.Precio general')); ?></label>
                        <input maxlength="7" value="<?php echo ($dataPerson->cost=="")?"":$dataPerson->cost?>" class="form-control" id="precioGeneral" onkeypress="return soloNumerosConDecimal(event);"> 
                    </div>
                </div>
                <div class="col-sm-4"></div>
            </div>
        </div>
           <div class="row" id="divMensajePrecioGeneral">
                <div class="col-sm-12">
                    <div class="col-sm-12">
                        <small><b>* <?php echo e(trans("leng.Si selecciona  Precio general, se tomará este precio para todos los servicios")); ?>.</b></small>
                    </div>
                </div>
            </div>
           <br>
            <div class="row">
                <div class="col-sm-12">
                    <div class="col-sm-5">
                        <button type="button" onclick="agregarServicio();"  class="btn btn-secondary btn-sm"><i class="fa fa-plus"></i>&nbsp;<?php echo e(trans("leng.Agregar servicio")); ?></button>
                    </div>
                </div>
            </div>
            
            <br> 
            <div class="row">
                <div class="col-sm-12">
                    <div class="col-sm-10">
                        <table class="table table-bordered table-highlight" id="listaServicios">
                            <thead>
                              <tr>
                                <th>#</th>
                                <th style="width: 300px;"><?php echo e(trans("leng.Servicio")); ?></th>
                                <th style="width: 400px;"><?php echo e(trans("leng.Descripción")); ?></th>
                                <th style="width: 300px;"><?php echo e(trans("leng.Precios establecidos")); ?></th>
                                <th><?php echo e(trans("leng.Precio")); ?></th>
                                <th></th>
                              </tr>
                            </thead>
                            <tbody>
                                 <?php echo $cadenaServicios; ?>
                            </tbody>
                          </table>
                    </div>    
                    <div  class="col-sm-4"></div>
                </div>
            </div>
            <br> 
            <div class="row">
                <div class="col-sm-12">
                    <div class="col-sm-4">
                        <button type="button" onclick="guardarServicios();" style="width: 110px;" class="btn btn-success btn-sm"><i class="fa fa-check-circle-o"></i>&nbsp;<?php echo e(trans("leng.Guardar")); ?></button>
                        <a type="button" href="<?php echo e(url("/prestadorServicios")); ?>" style="width: 110px;" class="btn btn-danger btn-sm"><i class="fa fa-times-circle"></i>&nbsp;<?php echo e(trans("leng.Salir")); ?></a>
                    </div>
                    <div class="col-sm-8"></div>
                </div>
            </div>
        
            <div id="divModal"></div>
            <div id="divNuevoServicio"></div>
      </div> 
        

<?php $__env->stopSection(); ?>

<?php $__env->startSection('piePagina'); ?>
        
<?php echo Html::script('js/prestadorServicio/misServicios.js'); ?>  
<?php $__env->stopSection(); ?>



<?php echo $__env->make('layouts.prestadorServicios', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>