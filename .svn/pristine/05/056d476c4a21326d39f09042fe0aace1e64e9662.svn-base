<?php if(count($shippingRequest->has('serviceOffers')->get()) > 0): ?>
	<table class="table table-striped text-small">
		<thead class="bg-success">
			<tr>
				<th role="column"><?php echo e(trans("leng.Transportista")); ?></th>
				<th role="column"><?php echo e(trans("leng.Oferta")); ?></th>
				<th role="column"><?php echo e(trans("leng.Fecha")); ?></th>
				<th role="column"><?php echo e(trans("leng.Recoger")); ?></th>
				<th role="column"><?php echo e(trans("leng.Entregar")); ?></th>
				<th role="column"><?php echo e(trans("leng.Estatus")); ?></th>
			</tr>
		</thead>
		<tbody>
			<?php foreach($shippingRequest->serviceOffers()->where('status', '!=', 4)->orderBy('id', 'desc')->get() as $serviceOffer): ?>
				<?php
				$fechaRecoleccion = T1\Funciones::fechaF1Hora($serviceOffer->collectiondate);
				$fechaEntrega	  = T1\Funciones::fechaF1Hora($serviceOffer->deliverydate);
				$labelEstatus	  = '';
				$estatus 		  = '';
				$linkEditar       = '';

				if (strlen($serviceOffer->collectionuntildate)) {
					$fechaRecoleccion .= ' :: ' . T1\Funciones::fechaF1Hora($serviceOffer->collectionuntildate);
				}

				if (strlen($serviceOffer->deliveryuntildate)) {
					$fechaEntrega .= ' :: ' . T1\Funciones::fechaF1Hora($serviceOffer->deliveryuntildate);
				}
				// =====================================================================

				switch ($serviceOffer->status) {
					case 1:
			            $labelEstatus = 'label-info';
			            $estatus      = trans('leng.Activa');
			            break;

			        case 2:
			            $labelEstatus = 'label-success';
			            $estatus      = trans('leng.Aceptada');
			            break;

			        case 3:
			            $labelEstatus = 'label-danger';
			            $estatus      = trans('leng.Rechazada');
			            break;

			        case 4:
			            $labelEstatus = 'label-warning';
			            $estatus      = trans('leng.Cancelada');
			            break;
				}

				?>
				<tr>
					<td><?php echo e($serviceOffer->shipper->person->firstname . ' ' . $serviceOffer->shipper->person->middlename . ' ' . $serviceOffer->shipper->person->lastname); ?></td>
					<td>S/ <?php echo e(number_format($serviceOffer->shipmentcost, 2)); ?></td>
					<td><?php echo e(T1\Funciones::fechaF1Hora($serviceOffer->createdat)); ?></td>
					<td><?php echo e($fechaRecoleccion); ?></td>
					<td><?php echo e($fechaEntrega); ?></td>
					<td><span class="label <?php echo e($labelEstatus); ?>"><?php echo e($estatus); ?></span></td>
				</tr>
			<?php endforeach; ?>
		</tbody>
	</table>
<?php else: ?>
    <h4>AÃºn no se han publicado ofertas.</h4>
<?php endif; ?>